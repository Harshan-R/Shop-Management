<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transactions - Pen Management</title>
    <style>
      /* Neomorphic design styles with Apple theme */
      body {
        font-family: "Helvetica Neue", sans-serif;
        background-color: #f5f5f7;
        margin: 0;
        padding: 0;
      }

      .navbar {
        background-color: #333333;
        color: #ffffff;
        padding: 10px 20px;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
      }

      .navbar a {
        color: #ffffff;
        text-decoration: none;
        margin-right: 20px;
      }

      .container {
        max-width: 1200px;
        padding: 20px;
        margin: 20px auto;
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 10px 10px 30px rgba(0, 0, 0, 0.1),
          -10px -10px 30px rgba(255, 255, 255, 0.5);
      }

      .card {
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1),
          -5px -5px 15px rgba(255, 255, 255, 0.5);
        padding: 20px;
        margin-bottom: 20px;
        transition: all 0.3s ease;
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: 10px 10px 30px rgba(0, 0, 0, 0.1),
          -10px -10px 30px rgba(255, 255, 255, 0.5);
      }

      .card-content {
        margin-bottom: 10px;
      }

      .filter-select {
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #ccc;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      .filter-select:hover {
        background-color: #f9f9f9;
      }

      .transaction-date {
        font-size: 0.9em;
        color: #777777;
      }

      /* Styles for improved color scheme */
      .primary-color {
        color: #007aff;
      }

      .secondary-color {
        color: #ff3b30;
      }

      .accent-color {
        color: #4cd964;
      }
    </style>
  </head>
  <body>
    <div class="navbar">
      <div>
        <a href="AdminHomePage.html">Home</a>
        <a href="Transactions.html">Transactions</a>
        <a href="Coupons.html">Coupons</a>
      </div>
      <div>
        <input type="date" id="dateFilter" class="filter-select" />
      </div>
    </div>

    <div class="container">
      <h1>Transactions</h1>

      <div id="transactionList" class="grid-container">
        <!-- Transaction cards will be dynamically generated here -->
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const dateFilter = document.getElementById("dateFilter");
        dateFilter.addEventListener("change", () => filterTransactions());

        fetch("transactions.json")
          .then((response) => response.json())
          .then((data) => {
            const transactionsData = data.transactions;
            displayTransactions(transactionsData);
          })
          .catch((error) => console.error("Error fetching data:", error));
      });

      function displayTransactions(transactions) {
        const transactionList = document.getElementById("transactionList");
        transactionList.innerHTML = "";

        transactions.forEach((transaction) => {
          const card = document.createElement("div");
          card.classList.add("card");

          const cardContent = document.createElement("div");
          cardContent.classList.add("card-content");

          const header = document.createElement("div");
          header.classList.add("card-header");
          header.innerHTML = `
          <h3>Transaction ID: ${transaction.transactionId}</h3>
          <span class="transaction-date">${transaction.transactionDate}</span>
        `;
          cardContent.appendChild(header);

          const customerInfo = document.createElement("div");
          customerInfo.innerHTML = `
          <p>Customer ID: ${transaction.customerId}</p>
          <p>Products Purchased:</p>
          <ul>
            ${transaction.products
              .map(
                (product) =>
                  `<li>${product.productName} (Quantity: ${product.quantity})</li>`
              )
              .join("")}
          </ul>
          <p>Discount: ${transaction.discountPercentage}%</p>
          <p>Grand Total: $${transaction.grandTotal.toFixed(2)}</p>
        `;
          cardContent.appendChild(customerInfo);

          card.appendChild(cardContent);
          transactionList.appendChild(card);
        });
      }

      function filterTransactions() {
        const dateFilter = document.getElementById("dateFilter").value;
        fetch("transactions.json")
          .then((response) => response.json())
          .then((data) => {
            const transactionsData = data.transactions;
            const filteredTransactions = transactionsData.filter(
              (transaction) => transaction.transactionDate === dateFilter
            );
            displayTransactions(filteredTransactions);
          })
          .catch((error) => console.error("Error fetching data:", error));
      }
    </script>
  </body>
</html>
